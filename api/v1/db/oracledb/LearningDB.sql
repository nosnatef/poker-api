DROP TABLE CARD_SUITS;
DROP TABLE CARD_NUMBERS;
DROP TABLE GAMES;
DROP TABLE MEMBERS;
DROP TABLE PARTICIPATIONS;
DROP TABLE ROUNDS;
DROP TABLE STATUSES;


CREATE TABLE CARD_SUITS (
    SUIT_ID NUMBER NOT NULL,
    SUIT    VARCHAR2(255 BYTE),
    PRIMARY KEY (SUIT_ID)
);

COMMENT ON TABLE CARD_SUITS IS 'Contains possible values for card suit';
COMMENT ON COLUMN CARD_SUITS.SUIT_ID IS 'ID of suit';
COMMENT ON COLUMN CARD_SUITS.SUIT IS 'Suit name';

INSERT INTO CARD_SUITS (SUIT_ID, SUIT) VALUES (1,'spades');
INSERT INTO CARD_SUITS (SUIT_ID, SUIT) VALUES (2,'diamonds');
INSERT INTO CARD_SUITS (SUIT_ID, SUIT) VALUES (3,'clubs');
INSERT INTO CARD_SUITS (SUIT_ID, SUIT) VALUES (4,'hearts');

CREATE TABLE CARD_NUMBERS (
    CARD_NUMBER_ID NUMBER NOT NULL,
    CARD_NUMBER    VARCHAR2(255 BYTE),
    PRIMARY KEY (CARD_NUMBER_ID)
);

COMMENT ON TABLE CARD_NUMBERS IS 'Contains possible values for card number';
COMMENT ON COLUMN CARD_NUMBERS.CARD_NUMBER_ID IS 'ID of number';
COMMENT ON COLUMN CARD_NUMBERS.CARD_NUMBER IS 'number name';

INSERT INTO CARD_NUMBERS (CARD_NUMBER_ID, CARD_NUMBER) VALUES (1,'A');
INSERT INTO CARD_NUMBERS (CARD_NUMBER_ID, CARD_NUMBER) VALUES (2,'2');
INSERT INTO CARD_NUMBERS (CARD_NUMBER_ID, CARD_NUMBER) VALUES (3,'3');
INSERT INTO CARD_NUMBERS (CARD_NUMBER_ID, CARD_NUMBER) VALUES (4,'4');
INSERT INTO CARD_NUMBERS (CARD_NUMBER_ID, CARD_NUMBER) VALUES (5,'5');
INSERT INTO CARD_NUMBERS (CARD_NUMBER_ID, CARD_NUMBER) VALUES (6,'6');
INSERT INTO CARD_NUMBERS (CARD_NUMBER_ID, CARD_NUMBER) VALUES (7,'7');
INSERT INTO CARD_NUMBERS (CARD_NUMBER_ID, CARD_NUMBER) VALUES (8,'8');
INSERT INTO CARD_NUMBERS (CARD_NUMBER_ID, CARD_NUMBER) VALUES (9,'9');
INSERT INTO CARD_NUMBERS (CARD_NUMBER_ID, CARD_NUMBER) VALUES (10,'10');
INSERT INTO CARD_NUMBERS (CARD_NUMBER_ID, CARD_NUMBER) VALUES (11,'J');
INSERT INTO CARD_NUMBERS (CARD_NUMBER_ID, CARD_NUMBER) VALUES (12,'Q');
INSERT INTO CARD_NUMBERS (CARD_NUMBER_ID, CARD_NUMBER) VALUES (13,'K');

CREATE TABLE CARDS (
    CARD_ID NUMBER NOT NULL,
    CARD_NUMBER_ID NUMBER NOT NULL,
    SUIT_ID NUMBER NOT NULL,
    PRIMARY KEY (CARD_ID),
    FOREIGN KEY (CARD_NUMBER_ID) REFERENCES CARD_NUMBERS(CARD_NUMBER_ID),
    FOREIGN KEY (SUIT_ID) REFERENCES CARD_SUITS(SUIT_ID)
);

INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (1, 1, 1);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (2, 2, 1);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (3, 3, 1);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (4, 4, 1);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (5, 5, 1);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (6, 6, 1);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (7, 7, 1);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (8, 8, 1);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (9, 9, 1);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (10, 10, 1);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (11, 11, 1);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (12, 12, 1);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (13, 13, 1);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (14, 1, 2);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (15, 2, 2);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (16, 3, 2);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (17, 4, 2);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (18, 5, 2);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (19, 6, 2);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (20, 7, 2);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (21, 8, 2);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (22, 9, 2);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (23, 10, 2);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (24, 11, 2);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (25, 12, 2);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (26, 13, 2);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (27, 1, 3);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (28, 2, 3);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (29, 3, 3);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (30, 4, 3);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (31, 5, 3);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (32, 6, 3);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (33, 7, 3);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (34, 8, 3);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (35, 9, 3);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (36, 10, 3);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (37, 11, 3);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (38, 12, 3);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (39, 13, 3);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (40, 1, 4);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (41, 2, 4);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (42, 3, 4);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (43, 4, 4);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (44, 5, 4);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (45, 6, 4);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (46, 7, 4);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (47, 8, 4);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (48, 9, 4);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (49, 10, 4);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (50, 11, 4);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (51, 12, 4);
INSERT INTO CARDS (CARD_ID, CARD_NUMBER_ID, SUIT_ID) VALUES (52, 13, 4);

CREATE TABLE ROUNDS (
    ROUND_ID NUMBER NOT NULL,
    ROUND VARCHAR2(255 BYTE),
    PRIMARY KEY (ROUND_ID)
);

INSERT INTO ROUNDS (ROUND_ID, ROUND) VALUES (1, 'blind');
INSERT INTO ROUNDS (ROUND_ID, ROUND) VALUES (2, 'flop');
INSERT INTO ROUNDS (ROUND_ID, ROUND) VALUES (3, 'turn');
INSERT INTO ROUNDS (ROUND_ID, ROUND) VALUES (4, 'river');
INSERT INTO ROUNDS (ROUND_ID, ROUND) VALUES (5, 'showdown');

CREATE TABLE MEMBERS (
    MEMBER_ID NUMBER NOT NULL,
    MEMBER_NAME VARCHAR2(255 BYTE),
    MEMBER_EMAIL VARCHAR2(255 BYTE),
    MEMBER_LEVEL NUMBER NOT NULL,
    MEMBER_EXP_OVER_LEVEL NUMBER NOT NULL,
    MEMBER_PASSWORD VARCHAR2(255 BYTE),
    PRIMARY KEY (MEMBER_ID),
    UNIQUE (MEMBER_EMAIL)
);

CREATE TABLE GAMES (
    GAME_ID NUMBER NOT NULL,
    ROUND_ID NUMBER NOT NULL,
    MINIMUM_BET NUMBER NOT NULL,
    MAXIMUM_BET NUMBER NOT NULL,
    BET_POOL NUMBER NOT NULL,
    PRIMARY KEY (GAME_ID),
    FOREIGN KEY (ROUND_ID) REFERENCES ROUNDS(ROUND_ID)
);

CREATE TABLE TABLE_CARDS (
    OWNERSHIP_ID NUMBER NOT NULL,
    GAME_ID NUMBER NOT NULL,
    CARD_ID NUMBER NOT NULL,
    PRIMARY KEY (OWNERSHIP_ID),
    FOREIGN KEY (GAME_ID) REFERENCES GAMES(GAME_ID),
    FOREIGN KEY (CARD_ID) REFERENCES CARDS(CARD_ID)
);

CREATE TABLE STATUSES (
    STATUS_ID NUMBER NOT NULL,
    STATUS VARCHAR2 (255 BYTE),
    PRIMARY KEY (STATUS_ID)
);

INSERT INTO STATUSES (STATUS_ID, STATUS) VALUES (1,'folded');
INSERT INTO STATUSES (STATUS_ID, STATUS) VALUES (2,'called');
INSERT INTO STATUSES (STATUS_ID, STATUS) VALUES (3,'raised');
INSERT INTO STATUSES (STATUS_ID, STATUS) VALUES (4,'checked');


CREATE TABLE PLAYERS (
    PLAYER_ID NUMBER NOT NULL,
    MEMBER_ID NUMBER NOT NULL,
    PLAYER_BET NUMBER NOT NULL,
    STATUS_ID NUMBER NOT NULL,
    PRIMARY KEY (PLAYER_ID),
    FOREIGN KEY (MEMBER_ID) REFERENCES MEMBERS(MEMBER_ID),
    FOREIGN KEY (STATUS_ID) REFERENCES STATUSES(STATUS_ID)
);

CREATE TABLE PLAYER_CARDS (
    OWNERSHIP_ID NUMBER NOT NULL,
    PLAYER_ID NUMBER NOT NULL,
    CARD_ID NUMBER NOT NULL,
    PRIMARY KEY (OWNERSHIP_ID),
    FOREIGN KEY (PLAYER_ID) REFERENCES PLAYERS(PLAYER_ID),
    FOREIGN KEY (CARD_ID) REFERENCES CARDS(CARD_ID)
);

CREATE TABLE PARTICIPATIONS (
    PARTICIPATION_ID NUMBER NOT NULL,
    MEMBER_ID NUMBER NOT NULL,
    GAME_ID NUMBER NOT NULL,
    PRIMARY KEY (PARTICIPATION_ID),
    FOREIGN KEY (MEMBER_ID) REFERENCES MEMBERS(MEMBER_ID),
    FOREIGN KEY (GAME_ID) REFERENCES GAMES(GAME_ID)
);

